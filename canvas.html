
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">



<title>Peter James Flanagan</title>
<style>
* { margin: 0; padding: 0;}
body {
	font-family:Tahoma, Geneva, sans-serif;
	overflow: hidden;
}
canvas#c {
	display: block;
	width: 100%;
	height: 100%;
	background: #CCC;
}
</style>

<body>
<canvas id="c"></canvas>

<script>
window.onload = function(){
	canvas = document.getElementById("c");
	ctx = canvas.getContext("2d");

	W = window.innerWidth, H = window.innerHeight;
	canvas.width = W;
	canvas.height = H;

	len = 40;

	function rando(min,max){
		return Math.random()*(max-min+1)+min;
	}

	function randomColor() {
		var rm = 255,
				gm = 255,
				bm = 255;
		var r = Math.round(Math.random()*rm);
		var g = Math.round(Math.random()*gm);
		var b = Math.round(Math.random()*bm);
		var a = 1; //(Math.random()*.5)+.5;
		var rgba = "rgba("+r+", "+g+", "+b+", "+a+")";
		return rgba;
	}

	function drawBackground(){
		ctx.globalCompositeOperation = "source-over";
		ctx.fillStyle = "rgba(0, 0, 0, 1)";
		ctx.fillRect(0, 0, W, H);
		//ctx.globalCompositeOperation = "lighter";
	}

	var Point = class Point {
		constructor(x, y){
			this.x = Math.floor(x);
			this.y = Math.floor(y);
			this.register();
			this.triangles = [];
		}
		
		registerTriangle(triangle){
			this.triangles.push(triangle);
		}

		register(){
			//points[this.x][this.y] = this;
		}
		
		isDone(){
			if(this.y > H || this.y < 0 || this.x > W || this.x < 0)
				return true;
			else if(this.triangles.length == 6)
				return true;
			return false;
		}

		distance(point){
			return Math.sqrt(
				Math.pow(this.x - point.x, 2) +
				Math.pow(this.y - point.y, 2)
			);
		}

		draw(){
			ctx.beginPath();
			ctx.arc(this.x, this.y, 2, 0, 2 * Math.PI, false);
			ctx.fillStyle = randomColor();
			ctx.fill();
			ctx.closePath();
		}
	};
	
	var Centroid = class Centroid {
		constructor(points){
			this.Ox = 0;
			this.Oy = 0;
			for(var i = 0; i < 3; i++){
				Ox += points[i].x;
				Oy += points[i].y;
			}
			this.Ox = Math.floor(Ox/3);
			this.Oy = Math.floor(Oy/3);
		}
		
		equals(centroid){
			return this.Ox == centroid.Ox && this.Oy == centroid.Oy;
		}
		
	}

	var Triangle = class Triangle {
		constructor(point1, point2, point3){
			this.points = [point1, point2, point3];
			this.registerPoints();
			this.findCentroid();
			this.setColor();
			this.draw();
		}
		
		equals(triangle){
			return this.centroid.equals(centroid);
		}
		
		registerPoints(){
			for(var i = 0; i < 3; i++)
				this.points[i].registerTriangle(this);
		}

		findCentroid(){			
			this.centroid = new Centroid(points)
		}

		setColor(){
			this.color = randomColor(); //use centroid
		}

		draw(){
			ctx.fillStyle = this.color;
			ctx.beginPath();
			ctx.moveTo(this.points[0].x, this.points[0].y);
			ctx.lineTo(this.points[1].x, this.points[1].y);
			ctx.lineTo(this.points[2].x, this.points[2].y);
			ctx.closePath();
			ctx.fill();
		}
	};

	function drawNext(){
		point = pointQueue.shift();
		while(point.isDone()){
			point = pointQueue.shift();
		}
		
		points = [
			//all possible points
		];
		//for point pair in points in order
			//if centroid is registered
				//pass
			//else
				//new Triangle
			
		
		
	}

	//////////////////////////////////////////////////////////////////////////////
	pointQueue = [];
	//points = new Array(W);
	//for (var i = 0; i < W; i++) {
	//  points[i] = new Array(H).fill(false);
	//}
	triangles = [];

	point1 = new Point(0, 0);
	point2 = new Point(len/2, len * Math.sqrt(3) / 2);
	point3 = new Point(len, 0);

	triangles.push(new Triangle(point1, point2, point3));
	pointQueue = triangles[0].points;

	drawNext();
}

</script>

</body></html>
